# ==================== 应用配置 ====================
APP_NAME=RAG Knowledge Base Server
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO

# ==================== 数据库配置 ====================
POSTGRES_USER=ragserver
POSTGRES_PASSWORD=ragserver_password
POSTGRES_HOST=localhost
POSTGRES_PORT=15432
POSTGRES_DB=ragserver

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=16379
REDIS_PASSWORD=ragserver_redis_password
REDIS_DB=0

# ==================== MinIO 对象存储配置 ====================
MINIO_HOST=localhost
MINIO_PORT=19000
MINIO_CONSOLE_PORT=19001
MINIO_ACCESS_KEY=ragserver
MINIO_SECRET_KEY=ragserver_minio_password
MINIO_SECURE=false
MINIO_BUCKET_DOCUMENTS=documents
MINIO_BUCKET_AVATARS=avatars
MINIO_BUCKET_TEMP=temp

# ==================== JWT 认证配置 ====================
# 生产环境请使用强密钥！可以用 openssl rand -hex 32 生成
JWT_SECRET_KEY=your-secret-key-change-in-production-please-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ==================== CORS 配置 ====================
# 开发环境可以使用 "*"，生产环境请指定具体域名
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# ==================== 文件上传配置 ====================
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=pdf,docx,doc,txt,md,html,htm,xlsx,xls,csv,pptx,jpg,png

# ==================== SiliconFlow API 配置 ====================
# 硅基流动 API（提供Embedding和LLM服务）
SILICONFLOW_API_KEY=your-siliconflow-api-key-here
SILICONFLOW_API_BASE=https://api.siliconflow.cn/v1

# ==================== Embedding 配置 ====================
# 使用硅基流动的 BAAI/bge-m3 模型
DEFAULT_EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DIMENSION=1024

# ==================== LLM 配置 ====================
# 使用硅基流动的 Qwen/Qwen3-8B 模型
DEFAULT_LLM_PROVIDER=siliconflow
SILICONFLOW_LLM_MODEL=Qwen/Qwen3-8B
SILICONFLOW_LLM_TEMPERATURE=0.7
SILICONFLOW_LLM_MAX_TOKENS=2000

# ==================== 向量搜索配置 ====================
# 向量索引类型: hnsw 或 ivfflat
VECTOR_INDEX_TYPE=hnsw
HNSW_M=16
HNSW_EF_CONSTRUCTION=64
IVFFLAT_LISTS=100

# 搜索默认配置
DEFAULT_SEARCH_TYPE=hybrid
DEFAULT_TOP_K=10
DEFAULT_SIMILARITY_THRESHOLD=0.7

# 混合搜索权重
HYBRID_VECTOR_WEIGHT=0.7
HYBRID_FULLTEXT_WEIGHT=0.3

# ==================== 缓存配置 ====================
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
QUERY_VECTOR_CACHE_TTL=86400
SEARCH_RESULT_CACHE_TTL=300

# ==================== 限流配置 ====================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_DAILY_QUOTA=10000

# ==================== 任务队列配置 ====================
TASKIQ_WORKERS=4
TASKIQ_MAX_RETRIES=3
TASKIQ_RETRY_DELAY=60

# 文档处理配置
DOCUMENT_PROCESSING_TIMEOUT=600
EMBEDDING_BATCH_SIZE=50
EMBEDDING_MAX_CONCURRENCY=3

# ==================== 监控配置 ====================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=19090
GRAFANA_PORT=13000


# ==================== 日志配置 ====================
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs/app.log
LOG_FILE_MAX_SIZE=10485760
LOG_FILE_BACKUP_COUNT=10

# ==================== 安全配置 ====================
# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=false

# API Key 配置
API_KEY_PREFIX=kb_
API_KEY_LENGTH=32

# ==================== 存储配额配置 ====================
DEFAULT_USER_STORAGE_QUOTA_GB=10
MAX_KNOWLEDGE_BASES_PER_USER=100
MAX_DOCUMENTS_PER_KNOWLEDGE_BASE=10000

# ==================== OCR 配置 ====================
OCR_ENABLED=true
OCR_AUTO_DETECT_THRESHOLD=50
OCR_LANGUAGES=zh,en

# ==================== Webhook 配置 ====================
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=10
WEBHOOK_MAX_RETRIES=3

# ==================== 开发模式配置 ====================
RELOAD=false
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json

# ==================== PM2 配置 ====================
API_PORT=18000

